<assembly>
	<id>bin</id>
	<formats>
		<format>zip</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>
	<fileSets>
		<fileSet>
			<directory>web/target/geoserver</directory>
			<outputDirectory>geoserver/webapps/geoserver</outputDirectory>
			<includes>
				<include>**/*</include>
			</includes>
			<excludes>
				<exclude>META-INF</exclude>
				<exclude>META-INF/**/*</exclude>
				<exclude>data</exclude>
				<exclude>data/**/*</exclude>
				<exclude>preview</exclude>
				<exclude>preview/**/*</exclude>
			</excludes>
		</fileSet>
		<fileSet>
			<directory>web/target/geoserver/WEB-INF</directory>
			<outputDirectory>geoserver/webapps/geoserver/conf</outputDirectory>
			<includes>
				<include>catalog.xml</include>
				<include>services.xml</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>web/target/geoserver/data</directory>
			<outputDirectory>geoserver/webapps/geoserver/conf/data</outputDirectory>
			<includes>
				<include>nyc/**/*</include>
				<include>shapefiles/**/*</include>
				<include>taz_shapes/**/*</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>web/target/geoserver/data</directory>
			<outputDirectory>geoserver/data_dir</outputDirectory>
			<includes>
				<include>**/*</include>
			</includes>
			<excludes>
				<exclude>nyc</exclude>
				<exclude>nyc/**/*</exclude>
				<exclude>taz_shapes</exclude>
				<exclude>taz_shapes/**/*</exclude>
				<exclude>shapefiles</exclude>
				<exclude>shapefiles/**/*</exclude>
			</excludes>
		</fileSet>
		<fileSet>
			<directory>web/target/geoserver/data</directory>
			<outputDirectory>geoserver/data_dir/data</outputDirectory>
			<includes>
				<include>nyc/**/*</include>
				<include>shapefiles/**/*</include>
				<include>taz_shapes/**/*</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>web/target/geoserver/WEB-INF</directory>
			<outputDirectory>geoserver/data_dir</outputDirectory>
			<includes>
				<include>catalog.xml</include>
				<include>services.xml</include>
			</includes>
		</fileSet>
		
		<fileSet>
			<directory>release/target/dependency</directory>
			<outputDirectory>geoserver/lib</outputDirectory>
			<includes>
              <include>ant-*.jar</include>
              <include>commons-el-*.jar</include>
			  <include>commons-logging-*.jar</include>
			  <include>log4j-*.jar</include>
              <include>jasper-compiler-*.jar</include>
              <include>jasper-compiler-jdt-*.jar</include>
              <include>jasper-runtime-*.jar</include>
              <include>jetty-*.jar</include>
              <include>jetty-util-*.jar</include>
              <include>jsp-api-*.jar</include>
              <include>servlet-api-*.jar</include>
              <include>slf4j-simple-*.jar</include>
              <include>xercesImpl-*.jar</include>
              <include>xmlParserAPIs-*.jar</include>
			</includes>
		</fileSet>
		<fileSet>
			<!-- we gather the .sh files in a separate task below -->
			<directory>release/bin</directory>
			<lineEnding>keep</lineEnding>
			<outputDirectory>geoserver/bin</outputDirectory>
			<includes>
				<include>*.bat</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>release/bin</directory>
			<lineEnding>unix</lineEnding>
			<outputDirectory>geoserver/bin</outputDirectory>
			<fileMode>0755</fileMode>
			<directoryMode>0755</directoryMode>
			<includes>
				<include>*.sh</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>release</directory>
			<outputDirectory>geoserver</outputDirectory>
			<includes>
				<include>LICENSE.txt</include>
				<include>GPL.txt</include>
				<include>RUNNING.txt</include>
				<include>README.txt</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>release/jetty</directory>
			<outputDirectory>geoserver</outputDirectory>
			<includes>
				<include>**/*</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>release/logs</directory>
			<outputDirectory>geoserver</outputDirectory>
		</fileSet>
	</fileSets>
</assembly>
